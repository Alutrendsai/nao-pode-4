<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>N√£o Pode</title>

  <!-- √çcone do app (iPhone / iOS) -->
  <link rel="apple-touch-icon" href="icon.png">
  <!-- Favicon (navegadores) -->
  <link rel="icon" type="image/png" href="icon.png">

  <style>
    :root{
      --bg: #fbf7f6;
      --card: #ffffff;
      --rose: #c9a4a1;      /* ros√© gold */
      --rose-2:#e7d2d0;
      --brown:#4a2f2a;     /* marrom */
      --brown-2:#6a4a43;
      --muted:#8a7b77;
      --shadow: 0 10px 28px rgba(74,47,42,.10);
      --radius: 22px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      padding:22px 18px 26px;
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;
      background: radial-gradient(1200px 600px at 50% -100px, var(--rose-2), var(--bg));
      color: var(--brown);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    /* fundos por time */
    body.team-ponei{
      background: radial-gradient(1200px 600px at 50% -100px, #ffdfe7, #fff6f8);
    }
    body.team-sol{
      background: radial-gradient(1200px 600px at 50% -100px, #fff2b8, #fffaf0);
    }

    .wrap{max-width:560px;margin:0 auto}
    .topbar{
      display:flex; align-items:center; justify-content:space-between;
      gap:12px; margin-bottom:14px;
    }
    .pill{
      padding:8px 12px;
      border-radius:999px;
      background: rgba(201,164,161,.20);
      color: var(--brown);
      border:1px solid rgba(201,164,161,.35);
      font-size:13px;
      white-space:nowrap;
    }

    .card{
      background:var(--card);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      border:1px solid rgba(201,164,161,.35);
      padding:22px;
    }
    .bigTitle{
      font-size:40px;
      margin:0;
      line-height:1.05;
      letter-spacing:-.3px;
    }
    .sub{
      margin:10px 0 0;
      color:var(--muted);
      font-size:15px;
      line-height:1.4;
    }
    .row{display:flex; gap:10px; flex-wrap:wrap; margin-top:16px}
    .grid2{display:grid; grid-template-columns:1fr 1fr; gap:10px; width:100%}

    .btn{
      width:100%;
      border:0;
      border-radius:16px;
      padding:16px 16px;
      font-size:18px;
      font-weight:700;
      background: var(--brown);
      color:#fff;
      box-shadow: 0 10px 20px rgba(74,47,42,.18);
      transition: transform .05s ease, box-shadow .15s ease, opacity .15s ease;
      cursor:pointer;
    }
    .btn:active{transform: translateY(1px)}
    .btn.secondary{
      background: rgba(201,164,161,.18);
      color: var(--brown);
      border:1px solid rgba(201,164,161,.55);
      box-shadow:none;
      font-weight:800;
    }
    .btn.ghost{
      background: transparent;
      color: var(--brown);
      border:1px solid rgba(201,164,161,.55);
      box-shadow:none;
    }
    .btn.small{
      padding:10px 12px;
      font-size:14px;
      border-radius:14px;
    }

    /* bot√£o selecionado (tempo) */
    .btn.selected{
      background: var(--brown);
      color:#fff;
      border:0;
      box-shadow: inset 0 4px 10px rgba(0,0,0,.18);
      transform: translateY(1px);
    }

    .teamBox{
      display:flex; align-items:center; justify-content:space-between;
      padding:14px 16px;
      border-radius:18px;
      background: rgba(201,164,161,.16);
      border:1px solid rgba(201,164,161,.40);
      margin-bottom:12px;
    }
    .teamName{
      display:flex; align-items:center; gap:10px;
      font-weight:900;
      font-size:18px;
    }
    .teamEmoji{font-size:44px}
    .timer{
      font-variant-numeric: tabular-nums;
      font-size:28px;
      font-weight:900;
      color: var(--brown);
      padding:10px 14px;
      border-radius:16px;
      background:#fff;
      border:1px solid rgba(201,164,161,.45);
      box-shadow: 0 8px 18px rgba(74,47,42,.07);
      min-width:110px;
      text-align:center;
    }

    /* ===== ‚ÄúCarta‚Äù (visual) ===== */
    .playingShell{
      /* no estado de jogo: s√≥ time + timer + carta */
      display:flex;
      flex-direction:column;
      gap:14px;
    }

    .gameCard{
      position:relative;
      border-radius:26px;
      border:1px solid rgba(201,164,161,.55);
      background:
        radial-gradient(900px 420px at 50% -40px, rgba(255,255,255,.95), rgba(255,255,255,.88)),
        repeating-linear-gradient(135deg, rgba(201,164,161,.10) 0 10px, rgba(255,255,255,.0) 10px 20px);
      box-shadow: 0 16px 34px rgba(74,47,42,.14);
      overflow:hidden;
      padding:18px 18px 20px;
    }
    .gameCard::before{
      content:"";
      position:absolute;
      inset:10px;
      border-radius:20px;
      border:1px dashed rgba(74,47,42,.16);
      pointer-events:none;
    }
    .gameCardHeader{
      display:flex;
      justify-content:center;
      align-items:center;
      gap:10px;
      padding:10px 12px;
      border-radius:16px;
      background: rgba(201,164,161,.18);
      border:1px solid rgba(201,164,161,.35);
      font-weight:950;
      color: var(--brown);
      text-align:center;
      margin-bottom:14px;
    }
    .word{
      margin:6px 0 0;
      font-size:40px;
      font-weight:1000;
      letter-spacing:-.3px;
      text-align:center;
    }
    .forbidden{
      margin-top:14px;
      font-size:26px;   /* maior pra ‚Äúatrapalhar‚Äù */
      line-height:1.55;
      font-weight:950;
      color: var(--brown-2);
      text-align:center;
    }
    .hint{
      margin-top:10px;
      color: var(--muted);
      font-size:13px;
      line-height:1.4;
      text-align:center;
    }

    .fimWrap{
      margin-top:16px;
      display:flex;
      justify-content:center;
    }

    .divider{height:1px;background:rgba(201,164,161,.35);margin:16px 0}

    .scoreBig{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:12px;
      margin-top:14px;
    }
    .scoreCard{
      padding:16px;
      border-radius:18px;
      background:#fff;
      border:1px solid rgba(201,164,161,.40);
      box-shadow: 0 8px 18px rgba(74,47,42,.07);
    }
    .scoreCard .t{font-weight:900; display:flex; align-items:center; gap:10px}
    .scoreCard .p{font-size:34px; font-weight:950; margin-top:8px}

    .badge{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid rgba(201,164,161,.45);
      background: rgba(201,164,161,.14);
      font-size:12px;
      color: var(--brown);
      font-weight:800;
    }
    .hidden{display:none !important;}

    /* logs */
    .logBlock{
      margin-top:12px;
      padding:14px 16px;
      border-radius:18px;
      background:#fff;
      border:1px solid rgba(201,164,161,.40);
      box-shadow: 0 8px 18px rgba(74,47,42,.07);
    }
    .logTitle{
      font-weight:950;
      display:flex;
      align-items:center;
      gap:10px;
      margin:0 0 10px;
    }
    .logLine{
      font-size:15px;
      color: var(--brown-2);
      padding:6px 0;
      border-top:1px solid rgba(201,164,161,.25);
    }
    .logLine:first-of-type{ border-top:0; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="topbar">
      <span class="badge">üÉè N√£o Pode</span>
      <div class="pill" id="deckInfo">Cartas restantes: ‚Äî</div>
    </div>

    <!-- SETUP -->
    <div class="card" id="screenSetup">
      <h1 class="bigTitle">Configurar rodada</h1>
      <p class="sub">Escolha a dura√ß√£o de cada jogada. A cada carta, o time alterna automaticamente.</p>

      <div class="row">
        <div class="grid2">
          <button class="btn secondary" id="btn30">‚è±Ô∏è 30s</button>
          <button class="btn secondary" id="btn60">‚è±Ô∏è 1 min</button>
        </div>
        <button class="btn" id="btnStartRound" disabled>Iniciar rodada</button>
        <p class="hint" id="setupHint">Escolha 30s ou 1 min para habilitar o in√≠cio.</p>
      </div>
    </div>

    <!-- GAME -->
    <div class="card hidden" id="screenGame">
      <div class="playingShell">
        <!-- S√≥ time + timer -->
        <div class="teamBox">
          <div class="teamName">
            <span class="teamEmoji" id="teamEmoji">ü¶Ñ</span>
            <span id="teamLabel">Time P√¥nei</span>
          </div>
          <div class="timer" id="timer">00:30</div>
        </div>

        <!-- CARTA / ESTADOS -->
        <div class="gameCard" aria-live="polite">
          <div class="gameCardHeader" id="cardHeader">Prepare-se</div>

          <!-- idle -->
          <div id="stateIdle">
            <h2 class="word" style="margin-top:6px;">Pronto?</h2>
            <p class="sub" style="text-align:center;margin-top:10px;">
              Toque em <b>‚ÄúNova carta‚Äù</b> para come√ßar a jogada deste time.
            </p>

            <div class="row">
              <button class="btn" id="btnNewCard">Nova carta</button>
            </div>
            <p class="hint">Sem repeti√ß√£o de cartas na rodada.</p>
          </div>

          <!-- playing -->
          <div id="statePlaying" class="hidden">
            <div class="word" id="word">‚Äî</div>
            <div class="forbidden" id="forbidden">‚Äî</div>

            <div class="row">
              <button class="btn" id="btnHit">Acertou (+10)</button>
              <button class="btn ghost" id="btnMiss">N√£o acertou</button>
            </div>

            <p class="hint">Se o tempo acabar, a jogada termina automaticamente.</p>
          </div>

          <!-- between: mant√©m a carta grande; continuar pequeno -->
          <div id="stateBetween" class="hidden">
            <div class="word" id="wordReview">‚Äî</div>
            <div class="forbidden" id="forbiddenReview">‚Äî</div>

            <p class="sub" style="text-align:center;margin-top:14px;">
              Pr√≥ximo: <b id="nextTeamText">üåû Time Sol</b>
            </p>

            <div class="row" style="justify-content:center;">
              <button class="btn small secondary" id="btnNextTurn">Continuar</button>
            </div>

            <p class="hint">Confer√™ncia r√°pida: advers√°rio pode checar a carta acima.</p>
          </div>
        </div>
      </div>

      <div class="fimWrap">
        <button class="btn small secondary" id="btnEndRound">FIM</button>
      </div>
    </div>

    <!-- END -->
    <div class="card hidden" id="screenEnd">
      <h1 class="bigTitle">Fim da rodada</h1>
      <p class="sub">Pontua√ß√£o final (10 pontos por acerto dentro do tempo).</p>

      <div class="scoreBig">
        <div class="scoreCard">
          <div class="t">ü¶Ñ Time P√¥nei</div>
          <div class="p" id="scorePonei">0</div>
        </div>
        <div class="scoreCard">
          <div class="t">üåû Time Sol</div>
          <div class="p" id="scoreSol">0</div>
        </div>
      </div>

      <div class="divider"></div>
      <div id="logArea"></div>

      <div class="row" style="margin-top:16px;">
        <button class="btn" id="btnNewRound">Nova rodada</button>
      </div>
      <p class="hint">Dica: apague o atalho antigo e ‚ÄúAdicionar √† Tela de In√≠cio‚Äù de novo se mudar √≠cone/nome.</p>
    </div>
  </div>

<script>
/** ===== CARTAS ===== */
const cards = [
  { word:"Flamingo", forbidden:["ave","rosa","praia"] },
  { word:"Abacaxi", forbidden:["fruta","amarelo","doce"] },
  { word:"Cinema", forbidden:["filme","pipoca","tela"] },
  { word:"Cachorro", forbidden:["animal","latir","pet"] },
  { word:"Chocolate", forbidden:["doce","cacau","a√ß√∫car"] },
  { word:"Dentista", forbidden:["dente","m√©dico","consulta"] },
  { word:"Avi√£o", forbidden:["voar","aeroporto","piloto"] },
  { word:"Biblioteca", forbidden:["livro","sil√™ncio","estudar"] },
  { word:"Sorvete", forbidden:["gelado","sobremesa","casquinha"] },
  { word:"Rel√≥gio", forbidden:["tempo","horas","pulso"] },
  { word:"Elefante", forbidden:["animal","tromba","grande"] },
  { word:"Praia", forbidden:["mar","areia","sol"] },
  { word:"Telefone", forbidden:["ligar","celular","mensagem"] },
  { word:"Pizza", forbidden:["queijo","redonda","italiana"] },
  { word:"Professor", forbidden:["escola","aula","ensinar"] },
  { word:"Computador", forbidden:["tela","teclado","internet"] },
  { word:"Caf√©", forbidden:["bebida","quente","manh√£"] },
  { word:"Futebol", forbidden:["bola","gol","time"] },
  { word:"√ìculos", forbidden:["ver","vis√£o","lentes"] },
  { word:"Chuva", forbidden:["√°gua","nuvem","molhar"] },
  { word:"Montanha", forbidden:["alto","pedra","subir"] },
  { word:"Espelho", forbidden:["reflexo","olhar","vidro"] },
  { word:"Bicicleta", forbidden:["pedalar","roda","guid√£o"] },
  { word:"Gato", forbidden:["animal","miar","bigode"] },
  { word:"Hospital", forbidden:["m√©dico","doente","emerg√™ncia"] },
  { word:"Fogo", forbidden:["quente","chama","queimar"] },
  { word:"Natal", forbidden:["dezembro","presente","papai noel"] },
  { word:"Banheiro", forbidden:["vaso","xixi","chuveiro"] },
  { word:"Dinheiro", forbidden:["pagar","comprar","banco"] },
  { word:"Geladeira", forbidden:["frio","comida","cozinha"] },
  { word:"Viagem", forbidden:["f√©rias","avi√£o","hotel"] },
  { word:"Lua", forbidden:["noite","c√©u","sat√©lite"] },
  { word:"Bolo", forbidden:["anivers√°rio","doce","forno"] },
  { word:"√înibus", forbidden:["transporte","passageiros","parada"] },
  { word:"Cadeira", forbidden:["sentar","m√≥vel","pernas"] },
  { word:"Circo", forbidden:["palha√ßo","lona","espet√°culo"] },
  { word:"Trem", forbidden:["trilho","esta√ß√£o","vag√£o"] },
  { word:"Pipoca", forbidden:["milho","cinema","estourar"] },
  { word:"Flor", forbidden:["planta","p√©tala","jardim"] },
  { word:"Espaguete", forbidden:["macarr√£o","massa","molho"] },
  { word:"Aranha", forbidden:["inseto","teia","oito"] },
  { word:"√ìculos de sol", forbidden:["escuro","ver√£o","olhos"] },
  { word:"Elevador", forbidden:["subir","descer","pr√©dio"] },
  { word:"Pirata", forbidden:["navio","tesouro","tapa-olho"] },
  { word:"Cobra", forbidden:["animal","rastejar","veneno"] },
  { word:"Travesseiro", forbidden:["dormir","cama","cabe√ßa"] },
  { word:"Sem√°foro", forbidden:["tr√¢nsito","sinal","carro"] },
  { word:"Fantasma", forbidden:["medo","branco","assombrar"] },

  // dif√≠ceis (originais)
  { word:"Tempo", forbidden:["horas","passar","rel√≥gio"] },
  { word:"Liberdade", forbidden:["preso","escolha","direito"] },
  { word:"Saudade", forbidden:["sentir","falta","lembrar"] },
  { word:"Sil√™ncio", forbidden:["som","barulho","falar"] },
  { word:"Mentira", forbidden:["verdade","enganar","falso"] },
  { word:"Futuro", forbidden:["amanh√£","depois","tempo"] },
  { word:"Caos", forbidden:["bagun√ßa","confus√£o","desordem"] },
  { word:"Orgulho", forbidden:["ego","vaidade","soberba"] },
  { word:"Destino", forbidden:["caminho","futuro","sorte"] },
  { word:"Consci√™ncia", forbidden:["mente","pensar","moral"] },

  // novas (com troca Obl√≠vio -> Costume)
  { word:"Euforia", forbidden:["felicidade","intensa","emo√ß√£o"] },
  { word:"Melancolia", forbidden:["tristeza","nostalgia","solid√£o"] },
  { word:"Ironia", forbidden:["sarcasmo","oposto","inten√ß√£o"] },
  { word:"Empatia", forbidden:["sentir","outro","compreender"] },
  { word:"Vazio", forbidden:["nada","aus√™ncia","oco"] },
  { word:"Ilus√£o", forbidden:["apar√™ncia","engano","real"] },
  { word:"In√©rcia", forbidden:["movimento","parado","f√≠sica"] },
  { word:"Ess√™ncia", forbidden:["natureza","interior","verdade"] },
  { word:"Costume", forbidden:["h√°bito","rotina","tradi√ß√£o"] },
  { word:"Exist√™ncia", forbidden:["vida","ser","viver"] },
  { word:"Contraponto", forbidden:["oposi√ß√£o","m√∫sica","diferen√ßa"] },
  { word:"Infinito", forbidden:["fim","eterno","limite"] },
  { word:"Identidade", forbidden:["quem","pessoa","caracter√≠stica"] },
  { word:"Prop√≥sito", forbidden:["objetivo","motivo","raz√£o"] },
  { word:"Escolha", forbidden:["decis√£o","op√ß√£o","caminho"] },
  { word:"Equil√≠brio", forbidden:["balan√ßo","harmonia","est√°vel"] },
  { word:"Confus√£o", forbidden:["bagun√ßa","mistura","entender"] },
  { word:"D√∫vida", forbidden:["certeza","pergunta","incerteza"] },
  { word:"Coragem", forbidden:["medo","enfrentar","ousar"] },
  { word:"Paci√™ncia", forbidden:["esperar","calma","tempo"] },

  // substitui√ß√µes (mais f√°ceis)
  { word:"Surpresa", forbidden:["inesperado","espanto","repente"] },
  { word:"Mist√©rio", forbidden:["segredo","desconhecido","resolver"] },
  { word:"Mudan√ßa", forbidden:["transformar","novo","diferente"] },
  { word:"Bagun√ßa", forbidden:["desordem","confus√£o","organizar"] },
  { word:"Rapidez", forbidden:["veloz","correria","r√°pido"] },
  { word:"Exclusivo", forbidden:["√∫nico","especial","raro"] },

  // extras
  { word:"Rotina", forbidden:["h√°bito","todo dia","igual"] },
  { word:"Mem√≥ria", forbidden:["lembrar","passado","recorda√ß√£o"] },
  { word:"Segredo", forbidden:["esconder","contar","mist√©rio"] },
  { word:"Desejo", forbidden:["querer","vontade","sonho"] },
  { word:"Conquista", forbidden:["vit√≥ria","alcan√ßar","ganhar"] },
  { word:"Fracasso", forbidden:["erro","perder","tentar"] },
  { word:"Sorte", forbidden:["azar","acaso","ganhar"] },
  { word:"Medo", forbidden:["receio","pavor","assustar"] },
  { word:"Esperan√ßa", forbidden:["acreditar","futuro","otimismo"] },
  { word:"Arrependimento", forbidden:["erro","passado","culpa"] }
];

/** ===== ESTADO ===== */
const TEAMS = [
  { name: "Time P√¥nei", emoji: "ü¶Ñ" },
  { name: "Time Sol", emoji: "üåû" },
];

let durationSec = null;     // 30 ou 60
let deck = [];
let currentTeam = 0;        // 0/1
let points = [0, 0];
let currentCard = null;

let remaining = 0;
let timerId = null;
let isPlaying = false;

/** logs por time */
let logs = [[], []]; // {word, hit}

/** Wake Lock (tela sempre ligada, quando suportado) */
let wakeLock = null;

function fmtTime(sec){
  const m = String(Math.floor(sec / 60)).padStart(2, "0");
  const s = String(sec % 60).padStart(2, "0");
  return `${m}:${s}`;
}
function shuffle(array){
  for(let i=array.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}
const el = (id) => document.getElementById(id);

function show(screenId){
  ["screenSetup","screenGame","screenEnd"].forEach(s => el(s).classList.add("hidden"));
  el(screenId).classList.remove("hidden");
}

function setTeamUI(){
  el("teamEmoji").textContent = TEAMS[currentTeam].emoji;
  el("teamLabel").textContent = TEAMS[currentTeam].name;
  el("nextTeamText").textContent = `${TEAMS[1-currentTeam].emoji} ${TEAMS[1-currentTeam].name}`;

  document.body.classList.remove("team-ponei","team-sol");
  document.body.classList.add(currentTeam === 0 ? "team-ponei" : "team-sol");
}

function setDeckInfo(){
  el("deckInfo").textContent = `Cartas restantes: ${deck.length}`;
}
function setTimerUI(){
  el("timer").textContent = fmtTime(remaining);
}

function setGameState(state){
  el("stateIdle").classList.toggle("hidden", state !== "idle");
  el("statePlaying").classList.toggle("hidden", state !== "playing");
  el("stateBetween").classList.toggle("hidden", state !== "between");

  // header da carta
  const header = el("cardHeader");
  if(state === "idle") header.textContent = "Prepare-se";
  if(state === "playing") header.textContent = "Adivinhe a palavra";
  if(state === "between") header.textContent = "Confer√™ncia";
}

/** Wake Lock */
async function enableWakeLock(){
  try{
    if("wakeLock" in navigator){
      wakeLock = await navigator.wakeLock.request("screen");
    }
  }catch(e){}
}
async function disableWakeLock(){
  try{
    if(wakeLock){
      await wakeLock.release();
      wakeLock = null;
    }
  }catch(e){}
}
document.addEventListener("visibilitychange", async () => {
  if(document.visibilityState === "visible" && !el("screenGame").classList.contains("hidden")){
    await enableWakeLock();
  }
});

function escapeHtml(str){
  return String(str)
    .replaceAll("&","&amp;")
    .replaceAll("<","&lt;")
    .replaceAll(">","&gt;")
    .replaceAll('"',"&quot;")
    .replaceAll("'","&#039;");
}

/** ===== JOGO ===== */
function startRound(){
  points = [0,0];
  logs = [[], []];
  currentTeam = 0;
  deck = shuffle([...cards]);
  currentCard = null;

  remaining = durationSec;
  isPlaying = false;

  setTeamUI();
  setDeckInfo();
  setTimerUI();
  setGameState("idle");
  show("screenGame");

  enableWakeLock();
}

function stopTimer(){
  if(timerId){
    clearInterval(timerId);
    timerId = null;
  }
  isPlaying = false;
}
function startTimer(){
  stopTimer();
  isPlaying = true;
  timerId = setInterval(() => {
    remaining -= 1;
    if(remaining <= 0){
      remaining = 0;
      setTimerUI();
      stopTimer();
      endTurn(false);
      return;
    }
    setTimerUI();
  }, 1000);
}

function drawCard(){
  if(deck.length === 0){
    endRound();
    return;
  }
  currentCard = deck.pop();
  setDeckInfo();

  el("word").textContent = currentCard.word;
  el("forbidden").textContent = "‚ùå " + currentCard.forbidden.join(" ¬∑ ");

  remaining = durationSec;
  setTimerUI();
  setGameState("playing");
  startTimer();
}

function endTurn(hit){
  if(currentCard){
    logs[currentTeam].push({ word: currentCard.word, hit: !!hit });
  }
  if(hit && remaining > 0){
    points[currentTeam] += 10;
  }
  stopTimer();

  // mant√©m carta vis√≠vel para confer√™ncia
  el("wordReview").textContent = currentCard?.word || "‚Äî";
  el("forbiddenReview").textContent = "‚ùå " + (currentCard?.forbidden?.join(" ¬∑ ") || "‚Äî");

  currentTeam = 1 - currentTeam;
  setTeamUI();

  setGameState("between");
}

function nextTurn(){
  currentCard = null;
  remaining = durationSec;
  setTimerUI();
  setGameState("idle");
}

function endRound(){
  stopTimer();
  disableWakeLock();

  el("scorePonei").textContent = String(points[0]);
  el("scoreSol").textContent = String(points[1]);

  const renderTeamLog = (teamIndex) => {
    const t = TEAMS[teamIndex];
    const items = logs[teamIndex];
    const lines = items.length
      ? items.map(it => `<div class="logLine">${it.hit ? "ü™ô" : "‚ùå"} ${escapeHtml(it.word)}</div>`).join("")
      : `<div class="logLine">‚Äî</div>`;

    return `
      <div class="logBlock">
        <div class="logTitle">${t.emoji} ${t.name}</div>
        ${lines}
      </div>
    `;
  };

  el("logArea").innerHTML = renderTeamLog(0) + renderTeamLog(1);
  show("screenEnd");
}

/** ===== EVENTOS ===== */
el("btn30").addEventListener("click", () => {
  durationSec = 30;
  el("btnStartRound").disabled = false;
  el("setupHint").textContent = "Dura√ß√£o selecionada: 30s.";

  el("btn30").classList.add("selected");
  el("btn60").classList.remove("selected");
  el("btn60").classList.add("hidden");
});
el("btn60").addEventListener("click", () => {
  durationSec = 60;
  el("btnStartRound").disabled = false;
  el("setupHint").textContent = "Dura√ß√£o selecionada: 1 min.";

  el("btn60").classList.add("selected");
  el("btn30").classList.remove("selected");
  el("btn30").classList.add("hidden");
});

el("btnStartRound").addEventListener("click", () => {
  if(!durationSec) return;
  startRound();
});

el("btnNewCard").addEventListener("click", () => {
  if(isPlaying) return;
  drawCard();
});

el("btnHit").addEventListener("click", () => {
  if(!isPlaying) return;
  endTurn(true);
});
el("btnMiss").addEventListener("click", () => {
  if(!isPlaying) return;
  endTurn(false);
});

el("btnNextTurn").addEventListener("click", () => {
  nextTurn();
});

el("btnEndRound").addEventListener("click", () => {
  endRound();
});

el("btnNewRound").addEventListener("click", () => {
  durationSec = null;
  el("btnStartRound").disabled = true;
  el("setupHint").textContent = "Escolha 30s ou 1 min para habilitar o in√≠cio.";

  // reseta bot√µes de tempo
  el("btn30").classList.remove("selected");
  el("btn60").classList.remove("selected");
  el("btn30").classList.remove("hidden");
  el("btn60").classList.remove("hidden");

  document.body.classList.remove("team-ponei","team-sol");
  show("screenSetup");
});

// inicial
deck = shuffle([...cards]);
setDeckInfo();
show("screenSetup");
</script>
</body>
</html>
